<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
<title>Missions SEGULA</title> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
<link rel="stylesheet" href="/css/leaflet.css" />
<link rel="stylesheet" href="/css/leaflet-search.css" />
<link rel="stylesheet" href="/css/style.css" />
<style>


.leaflet-marker-icon {
	color: #647fed;
	font-size: 16px;
	line-height: 16px;	
	text-align: center;
	vertical-align: middle;
	
	
}
.search-tip b {
	color: #fff;
}
.missionEnviro.search-tip b,
.missionEnviro.leaflet-marker-icon {
	background: #647fed
}
.missionModelisation.search-tip b,
.missionModelisation.leaflet-marker-icon {
	background: #647fed
}
.missionNatura2000.search-tip b,
.missionNatura2000.leaflet-marker-icon {
	background: #647fed
}
.missionSocietal.search-tip b,
.missionSocietal.leaflet-marker-icon {
	background: #647fed
}
.missionVidanges.search-tip b,
.missionVidanges.leaflet-marker-icon {
	background: #647fed
}
.search-tip {
	white-space: nowrap;
}
.search-tip b {
	display: inline-block;
	clear: left;
	float: right;
	padding: 0 4px;
	margin-left: 4px;
}
</style>
</head>

<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>
<script src="/js/leaflet-search.js"></script>
<script src="/geojson/Enviro.js"></script>
<script src="/geojson/Modelisation.js"></script>
<script src="/geojson/Natura2000.js"></script>
<script src="/geojson/Societal.js"></script>
<script src="/geojson/Vidanges.js"></script>

<script>

	var map = L.map('map', {
			zoom: 8,
			center: new L.latLng(45, 5),
			layers: L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png')
		}),
		geojsonOpts = {
			pointToLayer: function(feature, latlng) {
				return L.marker(latlng, {
					icon: L.divIcon({
						className: feature.properties.Nom,
						iconSize: L.point(1, 1),
					
					})
				});
			}
		};

	var poiLayers = L.layerGroup([
		L.geoJson(missionEnviro, geojsonOpts),
		L.geoJson(missionModelisation, geojsonOpts),
		L.geoJson(missionNatura2000, geojsonOpts),
		L.geoJson(missionSocietal, geojsonOpts),
		L.geoJson(missionVidanges, geojsonOpts)
	])
	.addTo(map);

	L.control.search({
		layer: poiLayers,
		initial: false,
		propertyName: 'Nom',
		buildTip: function(text, val) {
			var type = val.layer.feature.properties.Nom;
			return '<a href="#" class="'+type+'">'+text+'<b>'+type+'</b></a>';
		}
	})
	.addTo(map);

const tuiles = L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", 
		<!-- intègre la source Openstreetmap en bas à droite de la page--> 
		{
		attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
		}).addTo(map);
		const googleMap = L.tileLayer('http://{s}.google.com/vt/lyrs=m&x={x}&y={y}&z={z}',{
			maxZoom: 20,
			subdomains:['mt0','mt1','mt2','mt3']
		});
		googleMap.addTo(map);
		
		const vue_aerienne = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', );
		vue_aerienne.addTo(map);
		

</script>

<!-- MISSIONS ENVIRO -->
		<script>
		var missions_enviro = L.geoJSON(missionEnviro,	
		{
			onEachFeature: function(feature, layer){
				layer.bindPopup('<titre_popup>Nom de mission : </titre_popup>'+  feature.properties.Nom + '<br>'
				+'<titre_popup> Type de la mission : </titre_popup>'+feature.properties.Type+ '<br>'
				+'<titre_popup> Client : </titre_popup>'+feature.properties.Client+ '<br>'
				+'<titre_popup> Agence SEGULA : </titre_popup>'+feature.properties.Agence+ '<br>'
				+'<titre_popup> Année du début de la mission : </titre_popup>'+feature.properties.Année_D+ '<br>'
				+'<titre_popup> Année du fin de la mission : </titre_popup>'+feature.properties.Année_F+ '<br>'
				+'<titre_popup> Heures consacrées : </titre_popup>'+feature.properties.Heures+ '<br>'
				+'<titre_popup> Lien Document : </titre_popup>'+'<a href="'+feature.properties.PDF+' ">Télécharger</a>'+ '<br>'
				+'<img src="'+feature.properties.JPG+'" height="600px" width="1100px"/>'
				)
				}, 
					}).addTo(map)
		</script>
		
		
		<!-- MISSIONS MODELISATION -->
		<script>
		var missions_modelisation = L.geoJSON(missionModelisation,	
		{
			onEachFeature: function(feature, layer){
				layer.bindPopup('<titre_popup>Nom de mission : </titre_popup>'+ feature.properties.Nom+ '<br>'
				+'<titre_popup> Type de la mission : </titre_popup>'+feature.properties.Type+ '<br>'
				+'<titre_popup> Client : </titre_popup>'+feature.properties.Client+ '<br>'
				+'<titre_popup> Agence SEGULA : </titre_popup>'+feature.properties.Agence+ '<br>'
				+'<titre_popup> Année du début de la mission : </titre_popup>'+feature.properties.Année_D+ '<br>'
				+'<titre_popup> Année du fin de la mission : </titre_popup>'+feature.properties.Année_F+ '<br>'
				+'<titre_popup> Heures consacrées : </titre_popup>'+feature.properties.Heures+ '<br>'
				+'<titre_popup> Lien Document : </titre_popup>'+'<a href="'+feature.properties.PDF+' " >Télécharger</a>'+ '<br>'
				+'<img src="'+feature.properties.JPG+'" height="600px" width="1100px"/>'
				)
				}, }).addTo(map)
		</script>
		
		<!-- MISSIONS NATURA 2000 -->
		<script>
		var missions_natura2000 = L.geoJSON(missionNatura2000,	
		{
			onEachFeature: function(feature, layer){
				layer.bindPopup('<titre_popup>Nom de mission : </titre_popup>'+ feature.properties.Nom+ '<br>'
				+'<titre_popup> Type de la mission : </titre_popup>'+feature.properties.Type+ '<br>'
				+'<titre_popup> Client : </titre_popup>'+feature.properties.Client+ '<br>'
				+'<titre_popup> Agence SEGULA : </titre_popup>'+feature.properties.Agence+ '<br>'
				+'<titre_popup> Année du début de la mission : </titre_popup>'+feature.properties.Année_D+ '<br>'
				+'<titre_popup> Année du fin de la mission : </titre_popup>'+feature.properties.Année_F+ '<br>'
				+'<titre_popup> Heures consacrées : </titre_popup>'+feature.properties.Heures+ '<br>'
				+'<titre_popup> Lien Document : </titre_popup>'+'<a href="'+feature.properties.PDF+' " >Télécharger</a>'+ '<br>'
				+'<img src="'+feature.properties.JPG+'" height="600px" width="1100px"/>')
				}, }).addTo(map)
		</script>
		
		<!-- MISSIONS SOCIETAL -->
		<script>
		var missions_societal = L.geoJSON(missionSocietal,	
		{
			onEachFeature: function(feature, layer){
				layer.bindPopup('<titre_popup>Nom de mission : </titre_popup>'+ feature.properties.Nom+ '<br>'
				+'<titre_popup> Type de la mission : </titre_popup>'+feature.properties.Type+ '<br>'
				+'<titre_popup> Client : </titre_popup>'+feature.properties.Client+ '<br>'
				+'<titre_popup> Agence SEGULA : </titre_popup>'+feature.properties.Agence+ '<br>'
				+'<titre_popup> Année du début de la mission : </titre_popup>'+feature.properties.Année_D+ '<br>'
				+'<titre_popup> Année du fin de la mission : </titre_popup>'+feature.properties.Année_F+ '<br>'
				+'<titre_popup> Heures consacrées : </titre_popup>'+feature.properties.Heures+ '<br>'
				+'<titre_popup> Lien Document : </titre_popup>'+'<a href="'+feature.properties.PDF+' " >Télécharger</a>'+ '<br>'
				+'<img src="'+feature.properties.JPG+'" height="600px" width="1100px"/>')
				}, }).addTo(map)
		</script>
		
		<!-- MISSIONS VIDANGE -->
		<script>
		var missions_vidanges = L.geoJSON(missionVidanges,	
		{
			onEachFeature: function(feature, layer){
				layer.bindPopup('<titre_popup>Nom de mission : </titre_popup>'+ feature.properties.Nom+ '<br>'
				+'<titre_popup> Type de la mission : </titre_popup>'+feature.properties.Type+ '<br>'
				+'<titre_popup> Client : </titre_popup>'+feature.properties.Client+ '<br>'
				+'<titre_popup> Agence SEGULA : </titre_popup>'+feature.properties.Agence+ '<br>'
				+'<titre_popup> Année du début de la mission : </titre_popup>'+feature.properties.Année_D+ '<br>'
				+'<titre_popup> Année du fin de la mission : </titre_popup>'+feature.properties.Année_F+ '<br>'
				+'<titre_popup> Heures consacrées : </titre_popup>'+feature.properties.Heures+ '<br>'
				+'<titre_popup> Lien Document : </titre_popup>'+'<a href="'+feature.properties.PDF+' " >Télécharger</a>'+ '<br>'
				+'<img src="'+feature.properties.JPG+'" height="600px" width="1100px"/>')
				}, }).addTo(map)
		</script>


<script>
		<!-- Layers controls -->
		var baselayers = {
		"OpenStreetMap": tuiles,
		"Google Map": googleMap,
		"Vue aérienne": vue_aerienne
		};
		var overlays = {
			"Missions Enviro":missions_enviro,
			"Missions Modélisation" :missions_modelisation,
			"Missions Natura 2000" :missions_natura2000,
			"Missions Societal" : missions_societal,
			"Missions Vidanges" : missions_vidanges
			};
		L.control.layers(baselayers, overlays).addTo(map);
</script>

<script type="text/javascript" src="/labs-common.js"></script>

</body>
</html>
